<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles/main.css">
    <title>Book Notes</title>
</head>

<body>
    <header>
        <div class="container pt-4">
            <h1>Books Notes</h1>
            <p>This page includes a list of books that I've read recently and my notes on them.<br>
                You can add your own books through the form below. Keep in mind this will be locally
                hosted on your own device and therefore any changes will only affect your personal
                database, .....</p>
            <hr>
    </header>
    </div>

    <div class="container text-center mb-4">
        <a href="/new" class="btn btn-primary btn-lg px-4">
            Add New Book
        </a>
        <hr>
    </div>

    <section class="all-books container py-4">
        <% for(let book of books){%>
            <div class="book row align-items-start g-3 mb-4  p-3 bg-white rounded">

                <div class="col-auto">
                    <img src="<%= book.cover_url %>" alt="Cover of <%= book.title %>" class="book-cover img-fluid rounded" />
                </div>

                <div class="col">
                    <h3 class="title mb-1">
                        <%= book.title %> - <%= book.author %>
                    </h3>
                    <p class="date text-muted mb-2">
                        <%= new Date(book.date_read).toLocaleDateString("en-US") %>
                    </p>
                    <div class="rating-static mb-2">
                        <% for(let i=1; i <=5; i++) { %>
                            <%= i <=book.rating ? "★" : "☆" %>
                                <% } %> (<%= book.rating %>/5)
                    </div>

                    <%= book.review %>
                        </p>
                </div>
                <div class="col-12 d-flex justify-content-end gap-2 mt-3">
                    <a href="/edit/<%= book.id %>" class="btn btn-warning btn-sm">Edit</a>

                    <form action="/delete" method="POST" > 
                        <input type="hidden" name="id" value="<%= book.id %>">
                        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this book?');"> Delete</button>
                    </form>
                </div>
            </div>
            <hr>
            <% } %>

    </section>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>

</html>